# YOLOv5 执行手册
```
bishe/
├── 项目说明.md                  # 项目总体说明（本文件）
├── requirements.txt             # Python依赖包
├── .gitignore                   # Git忽略文件配置
│
├── configs/                     # 配置文件目录
│   ├── dataset.yaml             # 数据集配置
│   ├── train_config.yaml        # 训练配置
│   ├── tracking_config.yaml     # 跟踪算法配置
│   └── deploy_config.yaml       # 部署配置
│
├── data/                        # 数据目录
│   ├── raw/                     # 原始数据（FLIR、KAIST数据集）
│   ├── processed/               # 处理后的数据
│   └── annotations/             # 标注文件
│
├── models/                      # 模型定义目录
│   ├── yolov5/                  # YOLOv5相关模型
│   │   ├── yolov5s_infrared.yaml    # 红外优化的YOLOv5s配置
│   │   ├── modules/             # 自定义模块（注意力机制等）
│   │   └── backbone/            # 轻量化骨干网络
│   ├── tracking/                # 跟踪算法模型
│   │   ├── deepsort/            # DeepSORT实现
│   │   ├── bytetrack/           # ByteTrack实现
│   │   └── centertrack/         # CenterTrack实现
│   └── rknn/                    # RKNN量化模型
│
├── src/                         # 源代码目录
│   ├── detection/               # 目标检测模块
│   │   ├── __init__.py
│   │   ├── detector.py          # 检测器基类
│   │   ├── yolov5_detector.py   # YOLOv5检测器
│   │   └── data_augment.py      # 红外数据增强
│   ├── tracking/                # 多目标跟踪模块
│   │   ├── __init__.py
│   │   ├── tracker.py           # 跟踪器基类
│   │   ├── deepsort_tracker.py  # DeepSORT跟踪器
│   │   ├── bytetrack_tracker.py # ByteTrack跟踪器
│   │   └── centertrack_tracker.py # CenterTrack跟踪器
│   ├── deploy/                  # 部署相关模块
│   │   ├── __init__.py
│   │   ├── export_onnx.py       # 导出ONNX模型
│   │   ├── convert_rknn.py      # 转换RKNN模型
│   │   └── quantize.py          # INT8量化
│   ├── utils/                   # 工具函数
│   │   ├── __init__.py
│   │   ├── metrics.py           # 评估指标计算
│   │   ├── visualization.py     # 可视化工具
│   │   └── logger.py            # 日志工具
│   └── evaluation/              # 评估模块
│       ├── __init__.py
│       ├── detection_eval.py    # 检测评估
│       └── tracking_eval.py     # 跟踪评估
│
├── scripts/                     # 脚本目录
│   ├── data/                    # 数据处理脚本
│   │   ├── download_dataset.py  # 下载数据集
│   │   ├── prepare_flir.py      # 准备FLIR数据集
│   │   └── prepare_kaist.py     # 准备KAIST数据集
│   ├── train/                   # 训练脚本
│   │   ├── train_yolov5.py      # 训练YOLOv5
│   │   └── ablation_study.py    # 消融实验
│   ├── evaluate/                # 评估脚本
│   │   ├── eval_detection.py    # 评估检测性能
│   │   ├── eval_tracking.py     # 评估跟踪性能
│   │   └── compare_trackers.py  # 对比跟踪算法
│   └── deploy/                  # 部署脚本
│       ├── export_model.py      # 导出模型
│       ├── convert_to_rknn.py   # 转换为RKNN
│       └── test_rknn.py         # 测试RKNN模型
│
├── embedded/                    # 嵌入式代码目录
│   ├── include/                 # 头文件
│   │   ├── detector.h           # 检测器头文件
│   │   ├── tracker.h            # 跟踪器头文件
│   │   └── pipeline.h           # 处理流水线头文件
│   ├── src/                     # 源文件
│   │   ├── main.cpp             # 主程序
│   │   ├── detector.cpp         # 检测器实现
│   │   ├── tracker.cpp          # 跟踪器实现
│   │   └── pipeline.cpp         # 处理流水线实现
│   ├── lib/                     # 依赖库
│   ├── configs/                 # 嵌入式配置
│   ├── CMakeLists.txt           # CMake配置
│   └── 部署说明.md              # 嵌入式部署说明
│
├── docs/                        # 文档目录
│   ├── 完整实施指南.md          # 完整实施指南
│   ├── 脚本执行文档.md          # 脚本执行文档
│   └── 部署指南.md              # 部署指南
│
├── tests/                       # 测试目录
│   ├── test_detection.py        # 检测测试
│   ├── test_tracking.py         # 跟踪测试
│   └── test_utils.py            # 工具测试
│
└── outputs/                     # 输出目录
    ├── weights/                 # 模型权重
    ├── logs/                    # 训练日志
    ├── results/                 # 评估结果
    └── visualizations/          # 可视化结果
```
# 1.训练
1、基于上次的未训练完的模型继续训练：
```bash
$ python scripts/train/train_yolov5.py --resume outputs/exp2/weights/last.pt --epochs 200 --cache
```
2、基于上次的训练完的模型微调：
```bash
$ python scripts/train/train_yolov5.py --weights outputs/exp2/weights/last.pt --epochs 200 --hyp data/hyps/hyp.finetune.yaml --cache
```

#2.评估evaluate（检测+跟踪）

1、评估检测效果：
```bash
$ python scripts/evaluate/eval_detection.py --weights outputs/exp2/weights/best.pt --data data/processed/val
```
2、评估跟踪效果：
```bash
$ python scripts/evaluate/eval_tracking.py --tracker deepsort --data data/processed/val
```