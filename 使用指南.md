# FLIRæ•°æ®é›†å¤„ç†å’Œè®­ç»ƒä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

ä½ å·²ç»ä¸‹è½½äº†FLIR v2æ•°æ®é›†ZIPæ–‡ä»¶ï¼Œæœ¬æŒ‡å—å°†æŒ‡å¯¼ä½ å®Œæˆæ•°æ®å¤„ç†å’Œæ¨¡å‹è®­ç»ƒçš„å…¨è¿‡ç¨‹ã€‚

## ğŸ¯ é¡¹ç›®å·²ä¸ºä½ å‡†å¤‡å¥½çš„å†…å®¹

âœ… **æ•°æ®ç›®å½•å·²åˆ›å»º**
- `data/raw/flir/` - ç”¨äºå­˜æ”¾è§£å‹çš„åŸå§‹æ•°æ®
- `data/processed/flir/` - ç”¨äºå­˜æ”¾å¤„ç†åçš„YOLOæ ¼å¼æ•°æ®

âœ… **é…ç½®å·²ä¼˜åŒ–**
- `configs/dataset.yaml` - FLIRæ•°æ®é›†é…ç½®ï¼ˆ3ç±»ï¼šperson, car, bicycleï¼‰
- `configs/train_config.yaml` - è®­ç»ƒå‚æ•°é…ç½®

âœ… **è„šæœ¬å·²ç®€åŒ–**
- åªä¿ç•™å¿…éœ€çš„ `prepare_flir.py` æ•°æ®å¤„ç†è„šæœ¬
- ä¸éœ€è¦çš„ä¸‹è½½å’ŒKAISTè„šæœ¬å·²å½’æ¡£

âœ… **æ–‡æ¡£å·²å®Œå–„**
- 5ä¸ªè¯¦ç»†æŒ‡å—æ–‡æ¡£
- å®Œæ•´çš„æ•…éšœæ’é™¤
- ä¸°å¯Œçš„ä»£ç ç¤ºä¾‹

## ğŸš€ ä¸‰æ­¥å¼€å§‹

### æ­¥éª¤ 1ï¼šè§£å‹æ•°æ®é›†

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
# å‡è®¾ä½ çš„FLIR_ADAS_v2.zipåœ¨å½“å‰ç›®å½•
unzip FLIR_ADAS_v2.zip -d data/raw/flir/

# å¦‚æœZIPæ–‡ä»¶åœ¨å…¶ä»–ä½ç½®ï¼Œè°ƒæ•´è·¯å¾„ï¼š
# unzip /path/to/FLIR_ADAS_v2.zip -d data/raw/flir/
```

**é¢„æœŸç»“æœ**ï¼š
```
data/raw/flir/
â”œâ”€â”€ images_thermal_train/
â”‚   â”œâ”€â”€ coco.json
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ FLIR_00001.jpeg
â”‚       â”œâ”€â”€ FLIR_00002.jpeg
â”‚       â””â”€â”€ ...
â””â”€â”€ images_thermal_val/
    â”œâ”€â”€ coco.json
    â””â”€â”€ data/
        â””â”€â”€ ...
```

### æ­¥éª¤ 2ï¼šå¤„ç†æ•°æ®

```bash
# è¿è¡Œæ•°æ®å¤„ç†è„šæœ¬
python scripts/data/prepare_flir.py --input data/raw/flir --output data/processed/flir

# å¤„ç†è¿‡ç¨‹ä¼šæ˜¾ç¤ºè¿›åº¦æ¡
# å®Œæˆåä¼šç”Ÿæˆç»Ÿè®¡ä¿¡æ¯
```

**å¯é€‰å‚æ•°**ï¼š
```bash
# è‡ªå®šä¹‰è®­ç»ƒé›†æ¯”ä¾‹ï¼ˆé»˜è®¤0.8ï¼‰
python scripts/data/prepare_flir.py \
    --input data/raw/flir \
    --split-ratio 0.85

# è‡ªå®šä¹‰å›¾åƒå°ºå¯¸ï¼ˆé»˜è®¤640ï¼‰
python scripts/data/prepare_flir.py \
    --input data/raw/flir \
    --img-size 512

# å¯è§†åŒ–éƒ¨åˆ†ç»“æœ
python scripts/data/prepare_flir.py \
    --input data/raw/flir \
    --visualize
```

**é¢„æœŸç»“æœ**ï¼š
```
data/processed/flir/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train/  (~9000å¼ å›¾åƒ)
â”‚   â””â”€â”€ val/    (~1000å¼ å›¾åƒ)
â”œâ”€â”€ labels/
â”‚   â”œâ”€â”€ train/  (~9000ä¸ªæ ‡ç­¾æ–‡ä»¶)
â”‚   â””â”€â”€ val/    (~1000ä¸ªæ ‡ç­¾æ–‡ä»¶)
â”œâ”€â”€ calibration/  (æ ¡å‡†æ•°æ®)
â””â”€â”€ dataset_statistics.json  (ç»Ÿè®¡ä¿¡æ¯)
```

### æ­¥éª¤ 3ï¼šè®­ç»ƒæ¨¡å‹

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®å¼€å§‹è®­ç»ƒ
python scripts/train/train_yolov5.py --config configs/train_config.yaml

# è®­ç»ƒä¼šè‡ªåŠ¨ä¿å­˜åˆ° outputs/weights/
# - best.pt: æœ€ä½³æ¨¡å‹ï¼ˆéªŒè¯é›†æ€§èƒ½æœ€å¥½ï¼‰
# - last.pt: æœ€åä¸€ä¸ªepochçš„æ¨¡å‹
```

## ğŸ“Š æ£€æŸ¥æ•°æ®å¤„ç†ç»“æœ

### æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

```bash
# æŸ¥çœ‹æ•°æ®é›†ç»Ÿè®¡
cat data/processed/flir/dataset_statistics.json

# æˆ–è€…ç”¨Pythonç¾åŒ–è¾“å‡º
python -m json.tool data/processed/flir/dataset_statistics.json
```

### éªŒè¯æ•°æ®å®Œæ•´æ€§

```bash
# æ£€æŸ¥å›¾åƒå’Œæ ‡ç­¾æ•°é‡æ˜¯å¦åŒ¹é…
echo "è®­ç»ƒå›¾åƒæ•°: $(ls data/processed/flir/images/train/ | wc -l)"
echo "è®­ç»ƒæ ‡ç­¾æ•°: $(ls data/processed/flir/labels/train/ | wc -l)"
echo "éªŒè¯å›¾åƒæ•°: $(ls data/processed/flir/images/val/ | wc -l)"
echo "éªŒè¯æ ‡ç­¾æ•°: $(ls data/processed/flir/labels/val/ | wc -l)"
```

## ğŸ” å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### Q1: è§£å‹åç›®å½•ç»“æ„ä¸å¯¹

**ç°è±¡**ï¼šè§£å‹åçš„ç›®å½•ç»“æ„ä¸é¢„æœŸä¸åŒ

**æ£€æŸ¥**ï¼š
```bash
# æŸ¥çœ‹è§£å‹åçš„å®é™…ç»“æ„
tree -L 3 data/raw/flir/
# æˆ–
find data/raw/flir/ -type f -name "*.json" | head -5
```

**è§£å†³**ï¼š
å¦‚æœæ ‡æ³¨æ–‡ä»¶ä¸åœ¨é¢„æœŸä½ç½®ï¼Œ`prepare_flir.py` ä¼šè‡ªåŠ¨æœç´¢å¤šä¸ªå¯èƒ½çš„è·¯å¾„ã€‚å¦‚æœä»ç„¶æ‰¾ä¸åˆ°ï¼Œæ£€æŸ¥è„šæœ¬ä¸­çš„ `possible_paths` å˜é‡å¹¶æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ã€‚

### Q2: å¤„ç†è„šæœ¬æŠ¥é”™

**ç°è±¡**ï¼šè¿è¡Œ `prepare_flir.py` æ—¶å‡ºé”™

**å¸¸è§é”™è¯¯å’Œè§£å†³**ï¼š

1. **FileNotFoundError: æœªæ‰¾åˆ°æ ‡æ³¨æ–‡ä»¶**
   ```bash
   # ç¡®è®¤æ ‡æ³¨æ–‡ä»¶å­˜åœ¨
   find data/raw/flir/ -name "coco.json"
   ```

2. **ModuleNotFoundError: No module named 'cv2'**
   ```bash
   # å®‰è£…ç¼ºå¤±çš„ä¾èµ–
   pip install opencv-python
   ```

3. **å†…å­˜ä¸è¶³**
   ```bash
   # å‡å°å›¾åƒå°ºå¯¸
   python scripts/data/prepare_flir.py --input data/raw/flir --img-size 512
   ```

### Q3: è®­ç»ƒæ—¶å‡ºé”™

**ç°è±¡**ï¼šè®­ç»ƒè„šæœ¬æ— æ³•è¿è¡Œ

**æ£€æŸ¥æ¸…å•**ï¼š
- [ ] æ•°æ®æ˜¯å¦å·²æ­£ç¡®å¤„ç†
- [ ] configs/dataset.yaml è·¯å¾„æ˜¯å¦æ­£ç¡®
- [ ] GPUé©±åŠ¨å’ŒCUDAæ˜¯å¦å®‰è£…ï¼ˆå¦‚æœä½¿ç”¨GPUï¼‰
- [ ] ä¾èµ–åŒ…æ˜¯å¦å®Œæ•´å®‰è£…

**éªŒè¯æ•°æ®è·¯å¾„**ï¼š
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„
cat configs/dataset.yaml | grep path
```

## ğŸ“– è¿›é˜¶ä½¿ç”¨

### ä½¿ç”¨é¢„è®­ç»ƒæƒé‡

```bash
# ä¸‹è½½YOLOv5é¢„è®­ç»ƒæƒé‡
wget https://github.com/ultralytics/yolov5/releases/download/v6.0/yolov5s.pt

# ä½¿ç”¨é¢„è®­ç»ƒæƒé‡å¼€å§‹è®­ç»ƒ
python scripts/train/train_yolov5.py \
    --config configs/train_config.yaml \
    --weights yolov5s.pt
```

### è‡ªå®šä¹‰è®­ç»ƒå‚æ•°

ç¼–è¾‘ `configs/train_config.yaml`ï¼š

```yaml
epochs: 150          # è®­ç»ƒè½®æ¬¡
batch_size: 16       # æ‰¹æ¬¡å¤§å°ï¼ˆæ ¹æ®GPUå†…å­˜è°ƒæ•´ï¼‰
img_size: 640        # å›¾åƒå°ºå¯¸
learning_rate: 0.01  # å­¦ä¹ ç‡
```

### è¯„ä¼°æ¨¡å‹

```bash
# è¯„ä¼°è®­ç»ƒå¥½çš„æ¨¡å‹
python scripts/evaluate/eval_detection.py \
    --weights outputs/weights/best.pt \
    --data configs/dataset.yaml

# ä¿å­˜è¯„ä¼°ç»“æœ
python scripts/evaluate/eval_detection.py \
    --weights outputs/weights/best.pt \
    --save-txt \
    --save-conf
```

## ï¿½ï¿½ æ¨èå­¦ä¹ è·¯å¾„

### åˆæ¬¡ä½¿ç”¨ï¼ˆç¬¬1å¤©ï¼‰
1. âœ… é˜…è¯»æœ¬æŒ‡å—
2. âœ… è§£å‹æ•°æ®é›†
3. âœ… å¤„ç†æ•°æ®
4. âœ… å¼€å§‹ç¬¬ä¸€æ¬¡è®­ç»ƒ

### æ·±å…¥äº†è§£ï¼ˆç¬¬2-3å¤©ï¼‰
1. ğŸ“– é˜…è¯» [QUICKSTART.md](QUICKSTART.md)
2. ğŸ“– é˜…è¯» [DATA_PROCESSING_GUIDE.md](DATA_PROCESSING_GUIDE.md)
3. ğŸ”§ è°ƒæ•´è®­ç»ƒå‚æ•°
4. ğŸ“Š åˆ†æè®­ç»ƒç»“æœ

### é«˜çº§åº”ç”¨ï¼ˆç¬¬4-7å¤©ï¼‰
1. ğŸ“– é˜…è¯»å®Œæ•´ [README.md](README.md)
2. ğŸ¨ å°è¯•ä¸åŒçš„æ•°æ®å¢å¼º
3. ğŸ—ï¸ æµ‹è¯•ä¸åŒçš„æ¨¡å‹ç»“æ„
4. ğŸš€ éƒ¨ç½²æ¨¡å‹åˆ°åµŒå…¥å¼è®¾å¤‡

## ğŸ“ å®Œæ•´æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | é€‚ç”¨åœºæ™¯ | é˜…è¯»æ—¶é•¿ |
|------|----------|----------|
| **ä½¿ç”¨æŒ‡å—.md** (æœ¬æ–‡æ¡£) | é¦–æ¬¡ä½¿ç”¨ï¼Œå¿«é€Ÿä¸Šæ‰‹ | 10åˆ†é’Ÿ |
| [QUICKSTART.md](QUICKSTART.md) | å®Œæ•´æµç¨‹ï¼Œä»å®‰è£…åˆ°éƒ¨ç½² | 15åˆ†é’Ÿ |
| [DATA_PROCESSING_GUIDE.md](DATA_PROCESSING_GUIDE.md) | æ•°æ®å¤„ç†é‡åˆ°é—®é¢˜ | 20åˆ†é’Ÿ |
| [PROJECT_SETUP_SUMMARY.md](PROJECT_SETUP_SUMMARY.md) | é¡¹ç›®æ¦‚è§ˆï¼Œå¿«é€Ÿå‚è€ƒ | 10åˆ†é’Ÿ |
| [README.md](README.md) | æ·±å…¥äº†è§£é¡¹ç›®æ¶æ„ | 30åˆ†é’Ÿ |
| [data/README.md](data/README.md) | æ•°æ®ç›®å½•è¯¦ç»†è¯´æ˜ | 10åˆ†é’Ÿ |

## ğŸ†˜ è·å–å¸®åŠ©

### æŒ‰ä¼˜å…ˆçº§æŸ¥æ‰¾ç­”æ¡ˆ

1. **æŸ¥çœ‹æ–‡æ¡£**
   - å…ˆæŸ¥çœ‹æœ¬æŒ‡å—çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†
   - å†æŸ¥çœ‹ [DATA_PROCESSING_GUIDE.md](DATA_PROCESSING_GUIDE.md)

2. **æŸ¥çœ‹æ—¥å¿—**
   - æ•°æ®å¤„ç†ï¼šæŸ¥çœ‹ç»ˆç«¯è¾“å‡º
   - è®­ç»ƒï¼šæŸ¥çœ‹ `outputs/logs/` ç›®å½•

3. **æäº¤Issue**
   - GitHub Issues: https://github.com/Coolzs77/bishe/issues
   - æè¿°é—®é¢˜æ—¶åŒ…å«ï¼šé”™è¯¯ä¿¡æ¯ã€è¿è¡Œå‘½ä»¤ã€ç¯å¢ƒä¿¡æ¯

## âœ… æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®è®¤ï¼š

- [ ] Python 3.8+ å·²å®‰è£…
- [ ] ä¾èµ–åŒ…å·²å®‰è£… (`pip install -r requirements.txt`)
- [ ] FLIR_ADAS_v2.zip å·²ä¸‹è½½
- [ ] æœ‰è¶³å¤Ÿç£ç›˜ç©ºé—´ï¼ˆè‡³å°‘5GBï¼‰
- [ ] ï¼ˆå¯é€‰ï¼‰GPUé©±åŠ¨å·²å®‰è£…

å¼€å§‹å¤„ç†å‰ï¼Œç¡®è®¤ï¼š

- [ ] ZIPæ–‡ä»¶å·²è§£å‹åˆ° `data/raw/flir/`
- [ ] å¯ä»¥æ‰¾åˆ° `coco.json` æ ‡æ³¨æ–‡ä»¶
- [ ] å›¾åƒæ–‡ä»¶å­˜åœ¨äºdataç›®å½•ä¸­

å¼€å§‹è®­ç»ƒå‰ï¼Œç¡®è®¤ï¼š

- [ ] æ•°æ®å¤„ç†è„šæœ¬å·²æˆåŠŸè¿è¡Œ
- [ ] `data/processed/flir/` åŒ…å«å¤„ç†åçš„æ•°æ®
- [ ] `dataset_statistics.json` å·²ç”Ÿæˆ
- [ ] è®­ç»ƒé›†å’ŒéªŒè¯é›†æ•°é‡åˆç†

## ğŸ‰ å¼€å§‹å§ï¼

ç°åœ¨ä½ å·²ç»äº†è§£äº†æ‰€æœ‰å¿…è¦ä¿¡æ¯ï¼Œå¯ä»¥å¼€å§‹æ•°æ®å¤„ç†å’Œæ¨¡å‹è®­ç»ƒäº†ï¼

**ç¬¬ä¸€æ­¥ï¼šè§£å‹æ•°æ®**
```bash
unzip FLIR_ADAS_v2.zip -d data/raw/flir/
```

**ç¬¬äºŒæ­¥ï¼šå¤„ç†æ•°æ®**
```bash
python scripts/data/prepare_flir.py --input data/raw/flir
```

**ç¬¬ä¸‰æ­¥ï¼šå¼€å§‹è®­ç»ƒ**
```bash
python scripts/train/train_yolov5.py --config configs/train_config.yaml
```

ç¥ä½ è®­ç»ƒé¡ºåˆ©ï¼ğŸš€

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** å‚è€ƒå…¶ä»–æ–‡æ¡£æˆ–æäº¤Issue
**é‡åˆ°é—®é¢˜ï¼Ÿ** æŸ¥çœ‹"å¸¸è§é—®é¢˜"éƒ¨åˆ†
**æƒ³æ·±å…¥äº†è§£ï¼Ÿ** é˜…è¯»å®Œæ•´çš„README.md
